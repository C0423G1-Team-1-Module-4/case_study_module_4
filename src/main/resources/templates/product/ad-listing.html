<!DOCTYPE html>

<!--
 // WEBSITE: https://themefisher.com
 // TWITTER: https://twitter.com/themefisher
 // FACEBOOK: https://www.facebook.com/themefisher
 // GITHUB: https://github.com/themefisher/
-->
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="shop/layout.html :: head(${title})">
    <title></title>
    <style>
        #drop-zone {
            border: 2px dashed #ccc;
            padding: 20px;
            text-align: center;
            cursor: pointer;
        }

        #drop-zone.dragover {
            background-color: #f0f0f0;
        }

        .uploaded-images-container {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            margin-top: 10px;
        }

        .uploaded-image-container {
            margin-right: 10px;
            position: relative;
            display: inline-block;
        }

        .uploaded-image {
            max-width: 100px;
            max-height: 100px;
            margin: 5px;
        }

        #message {
            color: red;
            display: none;
        }

        img {
            max-width: 100%;
            max-height: 100%;
        }

        .image-container img {
            max-width: 100px;
            max-height: 100%;
        }

        #image-preview-container {
            display: flex;
            flex-wrap: wrap;
            width: 100px;
        }

        .preview-image {
            width: 100px;
            height: 100px;
            margin: 5px;
        }
    </style>
</head>
<body class="body-wrapper">
<header th:replace="shop/layout.html :: header"></header>
<section class="advt-post bg-gray py-5">
    <div class="container">
        <form th:action="@{/admins/vehicle/vehicle}" th:method="post" th:object="${vehicles}">
            <fieldset class="border border-gray px-3 px-md-4 py-4 mb-5">
                <div class="row">
                    <div class="col-lg-12">
                        <h3>Post Your ad</h3>
                    </div>
                    <div class="col-lg-6">
                        <h6 class="font-weight-bold pt-4 pb-1">Vehicle Name:</h6>
                        <input style="color: black" th:field="*{vehicleName}" type="text" class="form-control bg-white"
                               placeholder="Enter vehicle name" required>
                        <h6 class="font-weight-bold pt-4 pb-1">Fuel:</h6>
                        <div class="row px-3">
                            <div class="col-lg-4 mr-lg-4 my-2 pt-2 pb-1 rounded bg-white">
                                <input style="color: black" th:field="*{fuel}" type="radio" name="Petrol" value="Petrol"
                                       id="gas" required>
                                <label for="gas" class="py-2">Petrol</label>
                            </div>
                            <div class="col-lg-4 mr-lg-4 my-2 pt-2 pb-1 rounded bg-white ">
                                <input style="color: black" th:field="*{fuel}" type="radio" name="Diesel" value="Diesel"
                                       id="diesel" required>
                                <label for="diesel" class="py-2">Diesel</label>
                            </div>
                            <div class="col-lg-4 mr-lg-4 my-2 pt-2 pb-1 rounded bg-white">
                                <input style="color: black" th:field="*{fuel}" type="radio" name="Electric" value="Electric"
                                       id="electric" required>
                                <label for="electric" class="py-2">Electric</label>
                            </div>
                        </div>
                        <h6 class="font-weight-bold pt-4 pb-1">Description :</h6>
                        <textarea style="color: black" th:field="*{description}" name="" id=""
                                  class="form-control bg-white" rows="7"
                                  placeholder="Enter Description" required></textarea>
                    </div>
                    <div class="col-lg-6">
                        <h6 class="font-weight-bold pt-4 pb-1">Vehicle Type</h6>
                        <select style="color: black" th:field="*{vehicleType}" class="form-control w-100 bg-white"
                                id="inputGroupSelect">
                            <div th:each="typeItem : ${vehicleTypeList}">
                                <option style="color: black" th:text="${typeItem.typeName}"
                                        th:value="${typeItem.id}"></option>
                            </div>
                        </select>
                        <div class="price">
                            <h6 class="font-weight-bold pt-4 pb-1">Rental Price ($ USD):</h6>
                            <div class="row px-3">
                                <div class="col-lg-4 rounded my-2 px-0">
                                    <input style="color: black" th:field="*{rentalPrice}" type="number" name="price"
                                           class="form-control bg-white" placeholder="Price" id="price">
                                </div>
                            </div>
                        </div>
                        <h6 class="font-weight-bold pt-4 pb-1">Transmission</h6>
                        <div class="row px-3">
                            <div class="col-lg-4 mr-lg-4 my-2 pt-2 pb-1 rounded bg-white">
                                <input th:field="*{transmission}" type="radio" name="transmission" value="Manual"
                                       id="manual" required>
                                <label for="manual" class="py-2">Manual</label>
                            </div>
                            <div class="col-lg-4 mr-lg-4 my-2 pt-2 pb-1 rounded bg-white">
                                <input th:field="*{transmission}" type="radio" name="transmission" value="Automatic"
                                       id="automatic" required>
                                <label for="automatic" class="py-2">Automatic</label>
                            </div>
                        </div>
                        <div class="flex h-screen h-full w-full items justify-center">
                            <input style="width: 100%;height: 100%" type="file" id="upload-file" multiple
                                   accept=".jpg, .jpeg, .png" onchange="limitFiles(this, 4)">
                            <div id="image-preview-container"></div>
                            <input name="image" type="hidden" id="image">
                            <input name="imageOne" type="hidden" id="imageOne">
                            <input name="imageTwo" type="hidden" id="imageTwo">
                            <input name="imageThree" type="hidden" id="imageThree">
                        </div>
                    </div>
                </div>
            </fieldset>
            <!-- Post Your ad end -->
            <!-- seller-information start -->
            <button id="full-screen-spinner" style="display: none" type="submit" class="btn btn-primary mt-2" onclick="clickAdd()">Post Your Ad</button>
        </form>
    </div>
</section>
<!--============================
=            Footer            =
=============================-->
<footer th:replace="shop/layout.html :: footer"></footer>
<div th:replace="shop/layout.html :: js"></div>
<!--
Essential Scripts
=====================================-->
<script>
    function limitFiles(input, maxFiles) {
        if (input.files.length > maxFiles) {
            alert(`You can only select ${maxFiles} files.`);
            input.value = "";
        }
    }

    document.getElementById("upload-file").addEventListener("change", function (e) {
        const container = document.getElementById("image-preview-container");
        container.innerHTML = "";
        const maxFiles = 4;
        const files = e.target.files;
        if (files.length !== maxFiles) {
            alert(`You must select exactly ${maxFiles} files.`);
            e.target.value = "";
            return;
        }
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const img = document.createElement("img");
            const objectURL = URL.createObjectURL(file);
            img.src = objectURL;

            const imgElement = new Image();
            imgElement.src = objectURL;
            imgElement.onload = function () {
                if (imgElement.width > imgElement.height) {
                    img.style.width = "175px";
                    img.style.margin = "7px";
                    container.appendChild(img);
                } else {
                    alert(`Image ${i + 1} is in portrait orientation and is not accepted.`);
                    e.target.value = ""; // Clear the selected file
                    container.innerHTML = ""; // Clear all displayed images
                    return;
                }
            };
        }
    });
</script>
<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js"></script>
<script type="module" src="/js/configuration-firebase.js"></script>
<script type="module" src="/js/upload-file.js"></script>

</body>
</html>
